project_id = "zlrivxntdtewfagrbtry"

# === INTERNAL FUNCTIONS (called by other edge functions) ===
# These must have verify_jwt = false because they're called internally
# by audit-orchestrator using the service role client

[functions.audit-planner]
verify_jwt = false  # Called internally by audit-orchestrator

[functions.audit-orchestrator]
verify_jwt = true   # Called by frontend with user JWT

# === Existing functions (updated for orchestration chain) ===

[functions.github-proxy]
verify_jwt = true

[functions.audit-runner]
verify_jwt = true

[functions.audit-worker]
verify_jwt = false  # Called internally by audit-orchestrator

[functions.audit-coordinator]
verify_jwt = false  # Called internally by audit-orchestrator

[functions.github-oauth-start]
verify_jwt = true

[functions.github-oauth-callback]
verify_jwt = false

[functions.decrypt-github-token]
verify_jwt = true

[functions.send-email]
verify_jwt = true

[functions.verify-email]
verify_jwt = false

[functions.cost-estimator]
verify_jwt = false

# === Other internal/utility functions ===

[functions.preflight-manager]
verify_jwt = false  # Needs to work for both auth and anon users

[functions.health-check]
verify_jwt = false  # Health checks should be public

[functions.metrics]
verify_jwt = false  # Internal monitoring

[functions.observability]
verify_jwt = false  # Internal monitoring

[functions.auto-fix-generator]
verify_jwt = true   # User-initiated action